<h1>Iniciar sesión</h1>
<form id="f">
  <label>Email <input name="email" type="email" required></label><br>
  <label>Contraseña <input name="password" type="password" required></label><br>
  <button type="submit">Entrar</button>
</form>
<p id="msg"></p>
<p>¿Olvidaste tu contraseña? <a href="/auth/forgot">Recuperarla</a></p>
<p>¿No tenés cuenta? <a href="/register">Registrate</a></p>

<script>
  const f = document.getElementById('f'); const msg = document.getElementById('msg');
  f.addEventListener('submit', async (e)=>{
    e.preventDefault();
    msg.textContent = 'Iniciando...';
    const body = Object.fromEntries(new FormData(f).entries());
    try{
      const r = await fetch('/api/sessions/login', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(body)
      });
      const data = await r.json();
      if(!r.ok) throw new Error(data.error || 'Error');
      location.href = '/products';
    }catch(err){ msg.textContent = err.message; }
  });
</script>
